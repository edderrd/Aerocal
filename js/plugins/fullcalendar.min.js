/*

 FullCalendar v1.4.5
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, required jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2009 Adam Shaw
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Date: Thu Apr 22 20:27:14 2010 -0700

*/
(function(m){function Ma(a,b){a._id=a._id||(a.id===E?"_fc"+Fb++:a.id+"");if(a.date){if(!a.start)a.start=a.date;delete a.date}a._start=q(a.start=qb(a.start));a.end=qb(a.end);if(a.end&&a.end<=a.start)a.end=null;a._end=a.end?q(a.end):null;if(a.allDay===E)a.allDay=b.allDayDefault;if(a.className){if(typeof a.className=="string")a.className=a.className.split(/\s+/)}else a.className=[]}function bb(a,b,e){function c(i,h,y,C){t=i;R=h;ea=b.theme?"ui":"fc";Z=b.weekends?0:1;va=b.firstDay;if(Fa=b.isRTL){xa=-1;
ha=R-1}else{xa=1;ha=0}var L=u.start.getMonth(),ma=Ja(new Date),U,M=q(u.visStart);if(W){B();h=W.find("tr").length;if(t<h)W.find("tr:gt("+(t-1)+")").remove();else if(t>h){i="";for(h=h;h<t;h++){i+="<tr class='fc-week"+h+"'>";for(U=0;U<R;U++){i+="<td class='fc-"+ya[M.getDay()]+" "+ea+"-state-default fc-new fc-day"+(h*R+U)+(U==ha?" fc-leftmost":"")+"'>"+(C?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";w(M,1);Z&&ca(M)}i+="</tr>"}W.append(i)}$(W.find("td.fc-new").removeClass("fc-new"));
M=q(u.visStart);W.find("td").each(function(){var X=m(this);if(t>1)M.getMonth()==L?X.removeClass("fc-other-month"):X.addClass("fc-other-month");+M==+ma?X.removeClass("fc-not-today").addClass("fc-today").addClass(ea+"-state-highlight"):X.addClass("fc-not-today").removeClass("fc-today").removeClass(ea+"-state-highlight");X.find("div.fc-day-number").text(M.getDate());w(M,1);Z&&ca(M)});if(t==1){M=q(u.visStart);S.find("th").each(function(){m(this).text(ra(M,y,b));this.className=this.className.replace(/^fc-\w+(?= )/,
"fc-"+ya[M.getDay()]);w(M,1);Z&&ca(M)});M=q(u.visStart);W.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+ya[M.getDay()]);w(M,1);Z&&ca(M)})}}else{var na=m("<table/>").appendTo(a);i="<thead><tr>";for(h=0;h<R;h++){i+="<th class='fc-"+ya[M.getDay()]+" "+ea+"-state-default"+(h==ha?" fc-leftmost":"")+"'>"+ra(M,y,b)+"</th>";w(M,1);Z&&ca(M)}S=m(i+"</tr></thead>").appendTo(na);i="<tbody>";M=q(u.visStart);for(h=0;h<t;h++){i+="<tr class='fc-week"+h+"'>";for(U=0;U<R;U++){i+=
"<td class='fc-"+ya[M.getDay()]+" "+ea+"-state-default fc-day"+(h*R+U)+(U==ha?" fc-leftmost":"")+(t>1&&M.getMonth()!=L?" fc-other-month":"")+(+M==+ma?" fc-today "+ea+"-state-highlight":" fc-not-today")+"'>"+(C?"<div class='fc-day-number'>"+M.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";w(M,1);Z&&ca(M)}i+="</tr>"}W=m(i+"</tbody>").appendTo(na);$(W.find("td"));wa=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}ka()}
function g(i){Ga=i;i=W.find("tr td:first-child");var h=Ga-S.height(),y;if(b.weekMode=="variable")y=h=Math.floor(h/(t==1?2:6));else{y=Math.floor(h/t);h=h-y*(t-1)}if(cb===E){var C=W.find("tr:first").find("td:first");C.height(y);cb=y!=C.height()}if(cb){i.slice(0,-1).height(y);i.slice(-1).height(h)}else{Va(i.slice(0,-1),y);Va(i.slice(-1),h)}}function o(i){O=i;aa.clear();Na(S.find("th").slice(0,-1),sa=Math.floor(O/R))}function l(i){u.reportEvents(za=i);V(r(i))}function G(i){B();V(r(za),i)}function B(){u._clearEvents();
wa.empty()}function r(i){var h=q(u.visStart),y=w(q(h),R),C=m.map(i,D),L,ma,U,M,na,X,Sa=[];for(L=0;L<t;L++){ma=db(u.sliceSegs(i,C,h,y));for(U=0;U<ma.length;U++){M=ma[U];for(na=0;na<M.length;na++){X=M[na];X.row=L;X.level=U;Sa.push(X)}}w(h,7);w(y,7)}return Sa}function V(i,h){rb(i,t,u,0,O,function(y){return W.find("tr:eq("+y+")")},aa.left,aa.right,wa,P,h)}function D(i){if(i.end){var h=q(i.end);return i.allDay||h.getHours()||h.getMinutes()?w(h,1):h}else return w(q(i.start),1)}function P(i,h,y){u.eventElementHandlers(i,
h);if(i.editable||i.editable===E&&b.editable){J(i,h);y.isEnd&&u.resizableDayEvent(i,h,sa)}}function J(i,h){if(!b.disableDragging&&h.draggable){var y,C=0;h.draggable({zIndex:9,delay:50,opacity:u.option("dragOpacity"),revertDuration:b.dragRevertDuration,start:function(L,ma){u.hideEvents(i,h);u.trigger("eventDragStart",h,i,L,ma);y=ja(function(U){h.draggable("option","revert",!U||!U.rowDelta&&!U.colDelta);u.clearOverlays();if(U){C=U.rowDelta*7+U.colDelta*xa;oa(y,ta(w(q(i.start),C)),ta(w(D(i),C)))}else C=
0});y.mouse(L.pageX,L.pageY)},drag:function(L){y.mouse(L.pageX,L.pageY)},stop:function(L,ma){u.clearOverlays();u.trigger("eventDragStop",h,i,L,ma);if(C){h.find("a").removeAttr("href");u.eventDrop(this,i,C,0,i.allDay,L,ma)}else{m.browser.msie&&h.css("filter","");u.showEvents(i,h)}}})}}function $(i){i.click(A);u.option("selectable")&&i.mousedown(T)}function A(i){var h=parseInt(this.className.match(/fc\-day(\d+)/)[1]);h=w(q(u.visStart),Math.floor(h/R)*7+h%R);u.trigger("dayClick",this,h,true,i)}function T(i){v=
E;k=ja(function(h){u.clearOverlays();if(h){fa=true;F=h.row*R+h.col;if(v===E)v=F;I=[v,F].sort(eb);oa(k,I[0],I[1]+1);m.each(u.overlays,function(){$(this)})}else fa=false});m(document).mousemove(pa).mouseup(qa);k.mouse(i.pageX,i.pageY);i.stopPropagation()}function pa(i){k.mouse(i.pageX,i.pageY)}function qa(){m(document).unbind("mousemove",pa).unbind("mouseup",qa);fa&&u.trigger("select",u,ba(I[0]),ba(I[1]+1),true)}function ka(){if(fa){u.clearOverlays();fa=false;u.trigger("unselect",u)}}function ta(i){var h=
q(u.visStart),y,C,L=0;for(y=0;y<t;y++)for(C=0;C<R;C++){w(h,1);Z&&ca(h);if(h>i)return L;L++}return L}function ba(i){return w(q(u.visStart),i)}function oa(i,h,y){y=y-h;var C=Math.floor(h/R),L=h%R;for(a.offset();y>0;){h=Math.min(y,R-L);u.renderOverlay(i.rect(C,L,C+1,L+h,a),a);y-=h;C+=1;L=0}}function ja(i){var h=new fb(i);W.find("tr").each(function(){h.row(this)});i=W.find("tr:first td");if(Fa)i=m(i.get().reverse());i.each(function(){h.col(this)});return h}var ea,va,Z,Fa,xa,ha,O,Ga,t,R,sa,S,W,za=[],wa,
aa=new sb(function(i){return W.find("td:eq("+(i-Math.max(va,Z)+R)%R+") div div")}),u=m.extend(this,tb,e,{renderGrid:c,renderEvents:l,rerenderEvents:G,clearEvents:B,setHeight:g,setWidth:o,defaultEventEnd:function(i){return q(i.start)}});u.init(a,b);a.addClass("fc-grid");a.disableSelection&&a.disableSelection();var fa=false,k,v,F,I;u.unselect=ka;u.option("selectable")&&u.option("unselectable")&&m(document).mousedown(function(){ka()})}function rb(a,b,e,c,g,o,l,G,B,r,V){var D=e.options,P=D.isRTL,J,$=
a.length,A,T,pa,qa,ka,ta="",ba={},oa={},ja=[],ea=[];for(J=0;J<$;J++){A=a[J];T=A.event;pa="fc-event fc-event-hori ";if(P){if(A.isStart)pa+="fc-corner-right ";if(A.isEnd)pa+="fc-corner-left ";qa=A.isEnd?l(A.end.getDay()-1):c;ka=A.isStart?G(A.start.getDay()):g}else{if(A.isStart)pa+="fc-corner-left ";if(A.isEnd)pa+="fc-corner-right ";qa=A.isStart?l(A.start.getDay()):c;ka=A.isEnd?G(A.end.getDay()-1):g}ta+="<div class='"+pa+T.className.join(" ")+"' style='position:absolute;z-index:8;left:"+qa+"px'><a"+
(T.url?" href='"+Oa(T.url)+"'":"")+">"+(!T.allDay&&A.isStart?"<span class='fc-event-time'>"+Oa(Ka(T.start,T.end,e.option("timeFormat"),D))+"</span>":"")+"<span class='fc-event-title'>"+Oa(T.title)+"</span></a>"+((T.editable||T.editable===E&&D.editable)&&!D.disableResizing&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(P?"w":"e")+"'></div>":"")+"</div>";A.left=qa;A.outerWidth=ka-qa}B[0].innerHTML=ta;g=B.children();for(J=0;J<$;J++){A=a[J];c=m(g[J]);T=A.event;l=e.trigger("eventRender",
T,T,c);if(l===false)c.remove();else{if(l&&l!==true){c.remove();c=m(l).css({position:"absolute",left:A.left}).appendTo(B)}A.element=c;if(T._id===V)r(T,c,A);else c[0]._fci=J;e.reportEventElement(T,c)}}ub(B,a,r);for(J=0;J<$;J++){A=a[J];if(c=A.element){r=ba[B=A.key=vb(c[0])];A.hsides=r===E?(ba[B]=gb(c[0],true)):r}}for(J=0;J<$;J++){A=a[J];if(c=A.element)c[0].style.width=A.outerWidth-A.hsides+"px"}for(J=0;J<$;J++){A=a[J];if(c=A.element){r=oa[B=A.key];A.outerHeight=c[0].offsetHeight+(r===E?(oa[B]=wb(c[0])):
r)}}for(ba=J=0;ba<b;ba++){for(oa=B=r=0;J<$&&(A=a[J]).row==ba;){if(A.level!=B){oa+=r;r=0;B++}r=Math.max(r,A.outerHeight||0);A.top=oa;J++}ja[ba]=o(ba).find("td:first div.fc-day-content > div").height(oa+r)}for(ba=0;ba<b;ba++)ea[ba]=ja[ba][0].offsetTop;for(J=0;J<$;J++){A=a[J];if(c=A.element){c[0].style.top=ea[A.row]+A.top+"px";T=A.event;e.trigger("eventAfterRender",T,T,c)}}}function xb(a,b,e){function c(d,f){F=d;X=b.theme?"ui":"fc";La=b.weekends?0:1;Sa=b.firstDay;if(Wa=b.isRTL){ga=-1;Pa=F-1}else{ga=
1;Pa=0}Aa=yb(b.minTime);Xa=yb(b.maxTime);d=Wa?w(q(s.visEnd),-1):q(s.visStart);var j=q(d),H=Ja(new Date);if(aa){ka();aa.find("tr:first th").slice(1,-1).each(function(){m(this).text(ra(j,f,b));this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+ya[j.getDay()]);w(j,ga);La&&ca(j,ga)});j=q(d);v.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+ya[j.getDay()]);+j==+H?m(this).removeClass("fc-not-today").addClass("fc-today").addClass(X+"-state-highlight"):m(this).addClass("fc-not-today").removeClass("fc-today").removeClass(X+
"-state-highlight");w(j,ga);La&&ca(j,ga)})}else{var p,z,x=b.slotMinutes%15==0,K="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(b.allDaySlot?"":" fc-last")+"'><th class='fc-leftmost "+X+"-state-default'>&nbsp;</th>";for(p=0;p<F;p++){K+="<th class='fc-"+ya[j.getDay()]+" "+X+"-state-default'>"+ra(j,f,b)+"</th>";w(j,ga);La&&ca(j,ga)}K+="<th class='"+X+"-state-default'>&nbsp;</th></tr>";if(b.allDaySlot)K+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+
X+"-state-default'>"+b.allDayText+"</th><td colspan='"+F+"' class='"+X+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+X+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(F+2)+"' class='"+X+"-state-default fc-leftmost'><div/></th></tr>";K+="</table></div>";aa=m(K).appendTo(a);r(aa.find("td"));M=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(aa);j=zb();var Q=ia(q(j),Xa);ia(j,Aa);K="<table>";
for(p=0;j<Q;p++){z=j.getMinutes();K+="<tr class='"+(!p?"fc-first":!z?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+X+"-state-default'>"+(!x||!z?ra(j,b.axisFormat):"&nbsp;")+"</th><td class='fc-slot"+p+" "+X+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ia(j,b.slotMinutes);I++}K+="</table>";u=m("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(fa=m("<div style='position:relative;overflow:hidden'>").append(k=m(K))).appendTo(a);J(u.find("td"));
na=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fa);j=q(d);K="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(p=0;p<F;p++){K+="<td class='fc-"+ya[j.getDay()]+" "+X+"-state-default "+(!p?"fc-leftmost ":"")+(+j==+H?X+"-state-highlight fc-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";w(j,ga);La&&ca(j,ga)}K+="</tr></table></div>";v=m(K).appendTo(a)}B()}function g(){var d=
zb(),f=q(d);f.setHours(b.firstHour);var j=t(d,f)+1;d=function(){u.scrollTop(j)};d();setTimeout(d,0)}function o(d,f){L=d;hb={};u.height(d-aa.height());y=u.find("tr:first div").height()+1;v.css({top:aa.find("tr").height(),height:d});f&&g()}function l(d){C=d;Ta.clear();u.width(d);k.width("");d=aa.find("tr:first th");var f=v.find("td"),j=u[0].clientWidth;k.width(j);i=0;Na(aa.find("tr:lt(2) th:first").add(u.find("tr:first th")).width("").each(function(){i=Math.max(i,m(this).outerWidth())}),i);h=Math.floor((j-
i)/F);Na(f.slice(0,-1),h);Na(d.slice(1,-2),h);Na(d.slice(-2,-1),j-i-h*(F-1));v.css({left:i,width:j-i})}function G(d){var f=Math.floor((d.pageX-v.offset().left)/h);f=w(q(s.visStart),Pa+ga*f);var j=this.className.match(/fc-slot(\d+)/);if(j){j=parseInt(j[1])*b.slotMinutes;var H=Math.floor(j/60);f.setHours(H);f.setMinutes(j%60+Aa);s.trigger("dayClick",this,f,false,d)}else s.trigger("dayClick",this,f,true,d)}function B(){if(Ha){if(la){la.remove();la=null}s.clearOverlays();s.trigger("unselect",s);Ha=false}}
function r(d){d.click(G);s.option("selectable")&&d.mousedown(V)}function V(d){Ya=E;Ba=W(function(f){s.clearOverlays();if(la){la.remove();la=null}if(f){Ha=true;ib=f.col;if(Ya===E)Ya=ib;Ua=[Ya,ib].sort(eb);wa(Ba,Ua[0],Ua[1]+1);r(s.overlays[0])}else Ha=false});m(document).mousemove(D).mouseup(P);Ba.mouse(d.pageX,d.pageY);d.stopPropagation()}function D(d){Ba.mouse(d.pageX,d.pageY)}function P(){m(document).unbind("mousemove",D).unbind("mouseup",P);Ha&&s.trigger("select",s,w(q(s.visStart),Ua[0]),w(q(s.visStart),
Ua[1]+1),true)}function J(d){d.click(G);s.option("selectable")&&d.mousedown($)}function $(d){ua=E;Ba=za(function(f){s.clearOverlays();if(ua===E){ua=f.col;Ab=f.row}if(la){la.remove();la=null}if(f){Ha=true;jb=f.row;Ca=[Ab,jb].sort(eb);if(s.option("selectHelper")){f=Ba.rect(Ca[0],ua,Ca[1]+1,ua+1,fa);la=m(ea({title:"",start:S(ua,Ca[0]),end:S(ua,Ca[1]+1),className:[],editable:false},{top:f.top,left:f.left+2},"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));m.browser.msie||la.css("opacity",s.option("dragOpacity"));
J(la);fa.append(la);Na(la,f.width-5,true);Va(la,f.height,true)}else{s.renderOverlay(Ba.rect(Ca[0],ua,Ca[1]+1,ua+1,fa),fa);J(s.overlays[0])}}else{Ha=false;jb=E}});Ba.mouse(d.pageX,d.pageY);m(document).mousemove(A).mouseup(T);d.stopPropagation()}function A(d){Ba.mouse(d.pageX,d.pageY)}function T(){m(document).unbind("mousemove",A).unbind("mouseup",T);Ha&&s.trigger("select",s,S(ua,Ca[0]),S(ua,Ca[1]+1),false)}function pa(d,f){s.reportEvents(U=d);var j,H=d.length,p=[],z=[];for(j=0;j<H;j++)d[j].allDay?
p.push(d[j]):z.push(d[j]);oa(ta(p),f);ja(ba(z),f)}function qa(d){ka();pa(U,d)}function ka(){s._clearEvents();M.empty();na.empty()}function ta(d){d=db(s.sliceSegs(d,m.map(d,va),s.visStart,s.visEnd));var f,j=d.length,H,p,z,x=[];for(f=0;f<j;f++){H=d[f];for(p=0;p<H.length;p++){z=H[p];z.row=0;z.level=f;x.push(z)}}return x}function ba(d){var f=ia(q(s.visStart),Aa),j=m.map(d,va),H,p,z,x,K,Q,Y=[];for(H=0;H<F;H++){p=db(s.sliceSegs(d,j,f,ia(q(f),Xa-Aa)));Gb(p);for(z=0;z<p.length;z++){x=p[z];for(K=0;K<x.length;K++){Q=
x[K];Q.col=H;Q.level=z;Y.push(Q)}}w(f,1,true)}return Y}function oa(d,f){if(b.allDaySlot){rb(d,1,s,i,C,function(){return aa.find("tr.fc-all-day")},function(j){return i+Ta.left(R(j))},function(j){return i+Ta.right(R(j))},M,Fa,f);o(L)}}function ja(d,f){var j,H=d.length,p,z,x,K,Q,Y,N,da,Da,Ea,Bb="",Za={},Cb={};for(j=0;j<H;j++){p=d[j];z=p.event;x="fc-event fc-event-vert ";if(p.isStart)x+="fc-corner-top ";if(p.isEnd)x+="fc-corner-bottom ";K=t(p.start,p.start);Q=t(p.start,p.end);Y=p.col;N=p.level;da=p.forward||
0;Da=i+Ta.left(Y*ga+Pa);Ea=i+Ta.right(Y*ga+Pa)-Da;Ea=Math.min(Ea-6,Ea*0.95);Y=N?Ea/(N+da+1):da?(Ea/(da+1)-6)*2:Ea;N=Da+Ea/(N+da+1)*N*ga+(Wa?Ea-Y:0);p.top=K;p.left=N;p.outerWidth=Y;p.outerHeight=Q-K;Bb+=ea(z,p,x)}na[0].innerHTML=Bb;K=na.children();for(j=0;j<H;j++){p=d[j];z=p.event;x=m(K[j]);Q=s.trigger("eventRender",z,z,x);if(Q===false)x.remove();else{if(Q&&Q!==true){x.remove();x=m(Q).css({position:"absolute",top:p.top,left:p.left}).appendTo(na)}p.element=x;if(z._id===f)xa(z,x,p);else x[0]._fci=j;
s.reportEventElement(z,x)}}ub(na,d,xa);for(j=0;j<H;j++){p=d[j];if(x=p.element){f=Za[z=p.key=vb(x[0])];p.vsides=f===E?(Za[z]=kb(x[0],true)):f;f=Cb[z];p.hsides=f===E?(Cb[z]=gb(x[0],true)):f;z=x.find("span.fc-event-title");if(z.length)p.titleTop=z[0].offsetTop}}for(j=0;j<H;j++){p=d[j];if(x=p.element){x[0].style.width=p.outerWidth-p.hsides+"px";x[0].style.height=(Za=p.outerHeight-p.vsides)+"px";z=p.event;if(p.titleTop!==E&&Za-p.titleTop<10){x.find("span.fc-event-time").text(ra(z.start,s.option("timeFormat"))+
" - "+z.title);x.find("span.fc-event-title").remove()}s.trigger("eventAfterRender",z,z,x)}}}function ea(d,f,j){return"<div class='"+j+d.className.join(" ")+"' style='position:absolute;z-index:8;top:"+f.top+"px;left:"+f.left+"px'><a"+(d.url?" href='"+Oa(d.url)+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(Ka(d.start,d.end,s.option("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(d.title)+"</span></a>"+((d.editable||d.editable===E&&b.editable)&&!b.disableResizing&&
m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function va(d){if(d.allDay)return Z(d);return d.end?q(d.end):ia(q(d.start),b.defaultEventMinutes)}function Z(d){if(d.end){var f=q(d.end);return d.allDay||f.getHours()||f.getMinutes()?w(f,1):f}else return w(q(d.start),1)}function Fa(d,f,j){s.eventElementHandlers(d,f);if(d.editable||d.editable===E&&b.editable){ha(d,f,j.isStart);j.isEnd&&s.resizableDayEvent(d,f,h)}}function xa(d,f,j){s.eventElementHandlers(d,f);if(d.editable||
d.editable===E&&b.editable){var H=f.find("span.fc-event-time");O(d,f,H);j.isEnd&&Ga(d,f,H)}}function ha(d,f,j){if(!b.disableDragging&&f.draggable){var H,p,z,x=true,K;f.draggable({zIndex:9,opacity:s.option("dragOpacity","month"),revertDuration:b.dragRevertDuration,start:function(Q,Y){s.hideEvents(d,f);s.trigger("eventDragStart",f,d,Q,Y);H=f.position();p=f.width();z=function(){if(!x){f.width(p).height("").draggable("option","grid",null);x=true}};K=W(function(N){f.draggable("option","revert",!N||!N.rowDelta&&
!N.colDelta);s.clearOverlays();if(N)if(N.row){if(j&&x){Va(f.width(h-10),y*Math.round((d.end?(d.end-d.start)/Hb:b.defaultEventMinutes)/b.slotMinutes));f.draggable("option","grid",[h,1]);x=false}}else{wa(K,sa(w(q(d.start),N.colDelta)),sa(w(va(d),N.colDelta)));z()}});K.mouse(Q.pageX,Q.pageY)},drag:function(Q){K.mouse(Q.pageX,Q.pageY)},stop:function(Q,Y){s.trigger("eventDragStop",f,d,Q,Y);s.clearOverlays();var N=K.cell,da=ga*(x?N?N.colDelta:0:Math.floor((Y.position.left-H.left)/h));if(!N||!da&&!N.rowDelta){z();
m.browser.msie&&f.css("filter","");s.showEvents(d,f)}else{f.find("a").removeAttr("href");s.eventDrop(this,d,da,x?0:Math.round((f.offset().top-fa.offset().top)/y)*b.slotMinutes+Aa-(d.start.getHours()*60+d.start.getMinutes()),x,Q,Y)}}})}}function O(d,f,j){if(!b.disableDragging&&f.draggable){var H,p,z,x,K=false,Q;f.draggable({zIndex:9,scroll:false,grid:[h,y],axis:F==1?"y":false,opacity:s.option("dragOpacity"),revertDuration:b.dragRevertDuration,start:function(Y,N){s.hideEvents(d,f);s.trigger("eventDragStart",
f,d,Y,N);m.browser.msie&&f.find("span.fc-event-bg").hide();H=f.position();p=function(){if(K){j.css("display","");f.draggable("option","grid",[h,y]);K=false}};z=0;Q=W(function(da){f.draggable("option","revert",!da);s.clearOverlays();if(da)if(!da.row&&b.allDaySlot){if(!K){K=true;j.hide();f.draggable("option","grid",null)}wa(Q,sa(w(q(d.start),da.colDelta)),sa(w(Z(d),da.colDelta)))}else p()});Q.mouse(Y.pageX,Y.pageY)},drag:function(Y,N){x=Math.round((N.position.top-H.top)/y);if(x!=z){if(!K){N=x*b.slotMinutes;
var da=ia(q(d.start),N),Da;if(d.end)Da=ia(q(d.end),N);j.text(Ka(da,Da,s.option("timeFormat")))}z=x}Q.mouse(Y.pageX,Y.pageY)},stop:function(Y,N){s.clearOverlays();s.trigger("eventDragStop",f,d,Y,N);var da=Q.cell,Da=ga*(K?da?da.colDelta:0:Math.floor((N.position.left-H.left)/h));if(!da||!x&&!Da){p();m.browser.msie&&f.css("filter","").find("span.fc-event-bg").css("display","");f.css(H);s.showEvents(d,f)}else s.eventDrop(this,d,Da,K?0:x*b.slotMinutes,K,Y,N)}})}}function Ga(d,f,j){if(!b.disableResizing&&
f.resizable){var H,p;f.resizable({handles:{s:"div.ui-resizable-s"},grid:y,start:function(z,x){H=p=0;s.hideEvents(d,f);m.browser.msie&&m.browser.version=="6.0"&&f.css("overflow","hidden");f.css("z-index",9);s.trigger("eventResizeStart",this,d,z,x)},resize:function(z,x){H=Math.round((Math.max(y,f.height())-x.originalSize.height)/y);if(H!=p){j.text(Ka(d.start,!H&&!d.end?null:ia(s.eventEnd(d),b.slotMinutes*H),s.option("timeFormat")));p=H}},stop:function(z,x){s.trigger("eventResizeStop",this,d,z,x);if(H)s.eventResize(this,
d,0,b.slotMinutes*H,z,x);else{f.css("z-index",8);s.showEvents(d,f)}}})}}function t(d,f){d=q(d,true);if(f<ia(q(d),Aa))return 0;if(f>=ia(q(d),Xa))return fa.height();d=b.slotMinutes;f=f.getHours()*60+f.getMinutes()-Aa;var j=Math.floor(f/d),H=hb[j];if(H===E)H=hb[j]=u.find("tr:eq("+j+") td div")[0].offsetTop;return Math.max(0,Math.round(H-1+y*(f%d/d)))}function R(d){return(d-Math.max(Sa,La)+F)%F*ga+Pa}function sa(d){for(var f=Wa?w(q(s.visEnd),-1):q(s.visStart),j=0;j<F;j++){w(f,ga);La&&ca(f,ga);if(f>d)return j}return j}
function S(d,f){d=Ja(w(q(s.visStart),d));ia(d,Aa);for(var j=0;j<f;j++)ia(d,b.slotMinutes);return d}function W(d){var f=new fb(d);b.allDaySlot&&f.row(aa.find("td"));v.find("td").each(function(){f.col(this)});f.row(u);return f}function za(d){var f=new fb(d);k.find("td").each(function(){f.row(this)});v.find("td").each(function(){f.col(this)});return f}function wa(d,f,j){s.renderOverlay(d.rect(0,f,1,j,aa),aa)}var aa,u,fa,k,v,F,I=0,i,h,y,C,L,ma,U=[],M,na,X,Sa,La,Wa,ga,Pa,Aa,Xa,Ta=new sb(function(d){return v.find("td:eq("+
d+") div div")}),hb={},s=m.extend(this,tb,e,{renderAgenda:c,renderEvents:pa,rerenderEvents:qa,clearEvents:ka,setHeight:o,setWidth:l,beforeHide:function(){ma=u.scrollTop()},afterShow:function(){u.scrollTop(ma)},defaultEventEnd:function(d){var f=q(d.start);if(d.allDay)return f;return ia(f,b.defaultEventMinutes)}});s.init(a,b);a.addClass("fc-agenda");a.disableSelection&&a.disableSelection();var Ha=false,la,Ba;s.unselect=B;s.option("selectable")&&s.option("unselectable")&&m(document).mousedown(function(){B()});
var Ya,ib,Ua,ua,Ab,jb,Ca}function Gb(a){var b,e,c,g,o,l;for(b=a.length-1;b>0;b--){g=a[b];for(e=0;e<g.length;e++){o=g[e];for(c=0;c<a[b-1].length;c++){l=a[b-1][c];if(Db(o,l))l.forward=Math.max(l.forward||0,(o.forward||0)+1)}}}}function ub(a,b,e){a.unbind("mouseover").mouseover(function(c){for(var g=c.target,o;g!=this;){o=g;g=g.parentNode}if((g=o._fci)!==E){o._fci=E;o=b[g];e(o.event,o.element,o);m(c.target).trigger(c)}c.stopPropagation()})}function db(a){var b=[],e,c=a.length,g,o,l,G;for(e=0;e<c;e++){g=
a[e];for(o=0;;){l=false;if(b[o])for(G=0;G<b[o].length;G++)if(Db(b[o][G],g)){l=true;break}if(l)o++;else break}if(b[o])b[o].push(g);else b[o]=[g]}return b}function Ib(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Db(a,b){return a.end>b.start&&a.start<b.end}function lb(a,b,e){a.setFullYear(a.getFullYear()+b);e||Ja(a);return a}function mb(a,b,e){if(+a){b=a.getMonth()+b;var c=q(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(e||Ja(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+
(a<c?1:-1))}return a}function w(a,b,e){if(+a){b=a.getDate()+b;var c=q(a);c.setHours(9);c.setDate(b);a.setDate(b);e||Ja(a);nb(a,c)}return a}function nb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Jb)}function ia(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ja(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function q(a,b){if(b)return Ja(new Date(+a));return new Date(+a)}function zb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());
return b}function ca(a,b,e){for(b=b||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)w(a,b);return a}function Na(a,b,e){a.each(function(c,g){g.style.width=b-gb(g,e)+"px"})}function Va(a,b,e){a.each(function(c,g){g.style.height=b-kb(g,e)+"px"})}function gb(a,b){return(parseFloat(jQuery.curCSS(a,"paddingLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"paddingRight",true))||0)+(parseFloat(jQuery.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderRightWidth",true))||0)+(b?Kb(a):
0)}function Kb(a){return(parseFloat(jQuery.curCSS(a,"marginLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"marginRight",true))||0)}function kb(a,b){return(parseFloat(jQuery.curCSS(a,"paddingTop",true))||0)+(parseFloat(jQuery.curCSS(a,"paddingBottom",true))||0)+(parseFloat(jQuery.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderBottomWidth",true))||0)+(b?wb(a):0)}function wb(a){return(parseFloat(jQuery.curCSS(a,"marginTop",true))||0)+(parseFloat(jQuery.curCSS(a,"marginBottom",
true))||0)}function ob(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Lb(a){if($a!==false){var b;if(a.is("th,td"))a=(b=a).parent();if($a===E&&a.is("tr"))$a=a.position().top!=a.children().position().top;if($a)return a.parent().position().top+(b?a.position().top-b.position().top:0)}return 0}function fb(a){var b=this,e=[],c=[],g,o,l,G,B,r;b.row=function(V){g=m(V);e.push(g.offset().top+Lb(g))};b.col=function(V){o=m(V);c.push(o.offset().left)};b.mouse=function(V,
D){if(l===E){e.push(e[e.length-1]+g.outerHeight());c.push(c[c.length-1]+o.outerWidth());B=r=-1}var P;for(P=0;P<e.length&&D>=e[P];P++);for(D=0;D<c.length&&V>=c[D];D++);P=P>=e.length?-1:P-1;D=D>=c.length?-1:D-1;if(P!=B||D!=r){B=P;r=D;if(P==-1||D==-1)b.cell=null;else{if(l===E){l=P;G=D}b.cell={row:P,col:D,top:e[P],left:c[D],width:c[D+1]-c[D],height:e[P+1]-e[P],isOrig:P==l&&D==G,rowDelta:P-l,colDelta:D-G}}a(b.cell)}};b.rect=function(V,D,P,J,$){$=$.offset();return{top:e[V]-$.top,left:c[D]-$.left,width:c[J]-
c[D],height:e[P]-e[V]}}}function Qa(a){return(a<10?"0":"")+a}function pb(a,b){if(a[b]!==E)return a[b];b=b.split(/(?=[A-Z])/);for(var e=b.length-1,c;e>=0;e--){c=a[b[e].toLowerCase()];if(c!==E)return c}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")}function sb(a){function b(l){return c[l]=c[l]||a(l)}var e=this,c={},g={},o={};e.left=function(l){return g[l]=g[l]===E?b(l).position().left:g[l]};e.right=function(l){return o[l]=
o[l]===E?e.left(l)+b(l).width():o[l]};e.clear=function(){c={};g={};o={}}}function vb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function eb(a,b){return a-b}var Ia=m.fullCalendar={},Ra=Ia.views={},ab={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",
day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",
next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectable:true},Mb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Eb=Ia.setDefaults=
function(a){m.extend(true,ab,a)};m.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var o=m.data(this,"fullCalendar");if(o){o=o[a].apply(this,b);if(e===E)e=o}});if(e!==E)return e;return this}var c=a.eventSources||[];delete a.eventSources;if(a.events){c.push(a.events);delete a.events}c.unshift([]);a=m.extend(true,{},ab,a.isRTL||a.isRTL===E&&ab.isRTL?Mb:{},a);var g=a.theme?"ui":"fc";this.each(function(){function o(k){if(k!=Ga){ha++;
var v=t,F;if(v){if(v.eventsChanged){V();v.eventDirty=v.eventsChanged=false}v.beforeHide&&v.beforeHide();ob(Z,Z.height());v.element.hide()}else ob(Z,1);Z.css("overflow","hidden");if(R[k])(t=R[k]).element.show();else t=R[k]=m.fullCalendar.views[k](F=sa=m("<div class='fc-view fc-view-"+k+"' style='position:absolute'/>").appendTo(Z),a);if(u){u.find("div.fc-button-"+Ga).removeClass(g+"-state-active");u.find("div.fc-button-"+k).addClass(g+"-state-active")}t.name=Ga=k;l();Z.css("overflow","");v&&ob(Z,1);
!F&&t.afterShow&&t.afterShow();ha--}}function l(k){if(G()){ha++;Fa===E&&ka();if(!t.start||k||O<t.start||O>=t.end){t.render(O,k||0);ta(true);!W||!a.lazyFetching||t.visStart<W||t.visEnd>za?A():t.renderEvents(S)}else if(t.sizeDirty||t.eventsDirty||!a.lazyFetching){t.clearEvents();t.sizeDirty&&ta();a.lazyFetching?t.renderEvents(S):A()}va=ea.outerWidth();t.sizeDirty=false;t.eventsDirty=false;if(u){u.find("h2.fc-header-title").html(t.title);k=new Date;k>=t.start&&k<t.end?u.find("div.fc-button-today").addClass(g+
"-state-disabled"):u.find("div.fc-button-today").removeClass(g+"-state-disabled")}ha--;t.trigger("viewDisplay",ja)}}function G(){return ja.offsetWidth!==0}function B(){return m("body")[0].offsetWidth!==0}function r(){V();if(G()){t.clearEvents();t.renderEvents(S);t.eventsDirty=false}}function V(){m.each(R,function(){this.eventsDirty=true})}function D(){P();if(G()){ka();ta();t.rerenderEvents();t.sizeDirty=false}}function P(){m.each(R,function(){this.sizeDirty=true})}function J(k){S=[];W=q(t.visStart);
za=q(t.visEnd);for(var v=c.length,F=function(){--v||k&&k(S)},I=0;I<c.length;I++)$(c[I],F)}function $(k,v){var F=t.name,I=q(O),i=function(C){if(F==t.name&&+I==+O&&m.inArray(k,c)!=-1){for(var L=0;L<C.length;L++){Ma(C[L],a);C[L].source=k}S=S.concat(C);v&&v(C)}},h=function(C){i(C);pa()};if(typeof k=="string"){var y={};y[a.startParam]=Math.round(W.getTime()/1E3);y[a.endParam]=Math.round(za.getTime()/1E3);if(a.cacheParam)y[a.cacheParam]=(new Date).getTime();T();m.ajax({url:k,dataType:"json",data:y,cache:a.cacheParam||
false,success:h})}else if(m.isFunction(k)){T();k(q(W),q(za),h)}else i(k)}function A(){J(function(k){t.renderEvents(k)})}function T(){wa++||t.trigger("loading",ja,true)}function pa(){--wa||t.trigger("loading",ja,false)}function qa(k){if(k){var v=m("<tr/>");m.each(k.split(" "),function(F){F>0&&v.append("<td><span class='fc-header-space'/></td>");var I;m.each(this.split(","),function(i,h){if(h=="title"){v.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");I&&I.addClass(g+"-corner-right");I=null}else{var y;
if(aa[h])y=aa[h];else if(Ra[h])y=function(){C.removeClass(g+"-state-hover");o(h)};if(y){I&&I.addClass(g+"-no-right");var C;i=a.theme?pb(a.buttonIcons,h):null;var L=pb(a.buttonText,h);if(i)C=m("<div class='fc-button-"+h+" ui-state-default'><a><span class='ui-icon ui-icon-"+i+"'/></a></div>");else if(L)C=m("<div class='fc-button-"+h+" "+g+"-state-default'><a><span>"+L+"</span></a></div>");if(C){C.click(function(){C.hasClass(g+"-state-disabled")||y()}).mousedown(function(){C.not("."+g+"-state-active").not("."+
g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){C.removeClass(g+"-state-down")}).hover(function(){C.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){C.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(m("<td/>").appendTo(v));I?I.addClass(g+"-no-right"):C.addClass(g+"-corner-left");I=C}}}});I&&I.addClass(g+"-corner-right")});return m("<table/>").append(v)}}function ka(){Fa=a.contentHeight?a.contentHeight:a.height?
a.height-(u?u.height():0)-kb(Z[0]):Math.round(Z.width()/Math.max(a.aspectRatio,0.5))}function ta(k){ha++;t.setHeight(Fa,k);if(sa){sa.css("position","relative");sa=null}t.setWidth(Z.width(),k);ha--}function ba(){if(!ha)if(t.start){var k=++xa;setTimeout(function(){if(k==xa&&!ha&&G())if(va!=(va=ea.outerWidth())){ha++;D();t.trigger("windowResize",ja);ha--}},200)}else oa()}function oa(){setTimeout(function(){!t.start&&B()&&l()},0)}var ja=this,ea=m(ja).addClass("fc"),va,Z=m("<div class='fc-content "+g+
"-widget-content' style='position:relative'/>").prependTo(ja),Fa,xa=0,ha=0,O=new Date,Ga,t,R={},sa;a.isRTL&&ea.addClass("fc-rtl");a.theme&&ea.addClass("ui-widget");if(a.year!==E&&a.year!=O.getFullYear()){O.setDate(1);O.setMonth(0);O.setFullYear(a.year)}if(a.month!==E&&a.month!=O.getMonth()){O.setDate(1);O.setMonth(a.month)}a.date!==E&&O.setDate(a.date);var S=[],W,za,wa=0,aa={render:function(){ka();P();V();l()},changeView:o,getView:function(){return t},getDate:function(){return O},option:function(k,
v){if(v===E)return a[k];if(k=="height"||k=="contentHeight"||k=="aspectRatio"){a[k]=v;D()}},destroy:function(){m(window).unbind("resize",ba);u&&u.remove();Z.remove();m.removeData(ja,"fullCalendar")},prev:function(){l(-1)},next:function(){l(1)},prevYear:function(){lb(O,-1);l()},nextYear:function(){lb(O,1);l()},today:function(){O=new Date;l()},gotoDate:function(k,v,F){if(typeof k=="object")O=q(k);else{k!==E&&O.setFullYear(k);v!==E&&O.setMonth(v);F!==E&&O.setDate(F)}l()},incrementDate:function(k,v,F){k!==
E&&lb(O,k);v!==E&&mb(O,v);F!==E&&w(O,F);l()},updateEvent:function(k){var v,F=S.length,I,i=k.start-k._start,h=k.end?k.end-(k._end||t.defaultEventEnd(k)):0;for(v=0;v<F;v++){I=S[v];if(I._id==k._id&&I!=k){I.start=new Date(+I.start+i);I.end=k.end?I.end?new Date(+I.end+h):new Date(+t.defaultEventEnd(I)+h):null;I.title=k.title;I.url=k.url;I.allDay=k.allDay;I.className=k.className;I.editable=k.editable;Ma(I,a)}}Ma(k,a);r()},renderEvent:function(k,v){Ma(k,a);if(!k.source){if(v)(k.source=c[0]).push(k);S.push(k)}r()},
removeEvents:function(k){if(k){if(!m.isFunction(k)){var v=k+"";k=function(I){return I._id==v}}S=m.grep(S,k,true);for(F=0;F<c.length;F++)if(typeof c[F]=="object")c[F]=m.grep(c[F],k,true)}else{S=[];for(var F=0;F<c.length;F++)if(typeof c[F]=="object")c[F]=[]}r()},clientEvents:function(k){if(m.isFunction(k))return m.grep(S,k);else if(k){k+="";return m.grep(S,function(v){return v._id==k})}return S},rerenderEvents:r,addEventSource:function(k){c.push(k);$(k,r)},removeEventSource:function(k){c=m.grep(c,function(v){return v!=
k});S=m.grep(S,function(v){return v.source!=k});r()},refetchEvents:function(){J(r)},unselect:function(){for(n in R)R[n].unselect()}};m.data(this,"fullCalendar",aa);var u,fa=a.header;if(fa)u=m("<table class='fc-header'/>").append(m("<tr/>").append(m("<td class='fc-header-left'/>").append(qa(fa.left))).append(m("<td class='fc-header-center'/>").append(qa(fa.center))).append(m("<td class='fc-header-right'/>").append(qa(fa.right)))).prependTo(ea);m(window).resize(ba);o(a.defaultView);B()||oa()});return this};
var Fb=0;Eb({weekMode:"fixed"});Ra.month=function(a,b){return new bb(a,b,{render:function(e,c){if(c){mb(e,c);e.setDate(1)}e=this.start=q(e,true);e.setDate(1);this.end=mb(q(e),1);var g=this.visStart=q(e);c=this.visEnd=q(this.end);var o=b.weekends?0:1;if(o){ca(g);ca(c,-1,true)}w(g,-((g.getDay()-Math.max(b.firstDay,o)+7)%7));w(c,(7-c.getDay()+Math.max(b.firstDay,o))%7);g=Math.round((c-g)/(Nb*7));if(b.weekMode=="fixed"){w(c,(6-g)*7);g=6}this.title=ra(e,this.option("titleFormat"),b);this.renderGrid(g,
b.weekends?7:5,this.option("columnFormat"),true)}})};Ra.basicWeek=function(a,b){return new bb(a,b,{render:function(e,c){c&&w(e,c*7);e=this.visStart=q(this.start=w(q(e),-((e.getDay()-b.firstDay+7)%7)));c=this.visEnd=q(this.end=w(q(e),7));if(!b.weekends){ca(e);ca(c,-1,true)}this.title=Ka(e,w(q(c),-1),this.option("titleFormat"),b);this.renderGrid(1,b.weekends?7:5,this.option("columnFormat"),false)}})};Ra.basicDay=function(a,b){return new bb(a,b,{render:function(e,c){if(c){w(e,c);b.weekends||ca(e,c<0?
-1:1)}this.title=ra(e,this.option("titleFormat"),b);this.start=this.visStart=q(e,true);this.end=this.visEnd=w(q(this.start),1);this.renderGrid(1,1,this.option("columnFormat"),false)}})};var cb;Eb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ra.agendaWeek=function(a,b){return new xb(a,b,{render:function(e,c){c&&w(e,c*7);e=this.visStart=q(this.start=w(q(e),
-((e.getDay()-b.firstDay+7)%7)));c=this.visEnd=q(this.end=w(q(e),7));if(!b.weekends){ca(e);ca(c,-1,true)}this.title=Ka(e,w(q(c),-1),this.option("titleFormat"),b);this.renderAgenda(b.weekends?7:5,this.option("columnFormat"))}})};Ra.agendaDay=function(a,b){return new xb(a,b,{render:function(e,c){if(c){w(e,c);b.weekends||ca(e,c<0?-1:1)}this.title=ra(e,this.option("titleFormat"),b);this.start=this.visStart=q(e,true);this.end=this.visEnd=w(q(this.start),1);this.renderAgenda(1,this.option("columnFormat"))}})};
var tb={init:function(a,b){this.element=a;this.options=b;this.eventsByID={};this.eventElements=[];this.eventElementsByID={};this.overlays=[]},trigger:function(a,b){if(this.options[a])return this.options[a].apply(b||this,Array.prototype.slice.call(arguments,2).concat([this]))},eventEnd:function(a){return a.end?q(a.end):this.defaultEventEnd(a)},reportEvents:function(a){var b,e=a.length,c,g=this.eventsByID={};for(b=0;b<e;b++){c=a[b];if(g[c._id])g[c._id].push(c);else g[c._id]=[c]}},reportEventElement:function(a,
b){this.eventElements.push(b);var e=this.eventElementsByID;if(e[a._id])e[a._id].push(b);else e[a._id]=[b]},_clearEvents:function(){this.eventElements=[];this.eventElementsByID={}},showEvents:function(a,b){this._eee(a,b,"show")},hideEvents:function(a,b){this._eee(a,b,"hide")},_eee:function(a,b,e){a=this.eventElementsByID[a._id];var c,g=a.length;for(c=0;c<g;c++)a[c][0]!=b[0]&&a[c][e]()},eventDrop:function(a,b,e,c,g,o,l){var G=this,B=b.allDay,r=b._id;G.moveEvents(G.eventsByID[r],e,c,g);G.trigger("eventDrop",
a,b,e,c,g,function(){G.moveEvents(G.eventsByID[r],-e,-c,B);G.rerenderEvents()},o,l);G.eventsChanged=true;G.rerenderEvents(r)},eventResize:function(a,b,e,c,g,o){var l=this,G=b._id;l.elongateEvents(l.eventsByID[G],e,c);l.trigger("eventResize",a,b,e,c,function(){l.elongateEvents(l.eventsByID[G],-e,-c);l.rerenderEvents()},g,o);l.eventsChanged=true;l.rerenderEvents(G)},moveEvents:function(a,b,e,c){e=e||0;for(var g,o=a.length,l=0;l<o;l++){g=a[l];if(c!==E)g.allDay=c;ia(w(g.start,b,true),e);if(g.end)g.end=
ia(w(g.end,b,true),e);Ma(g,this.options)}},elongateEvents:function(a,b,e){e=e||0;for(var c,g=a.length,o=0;o<g;o++){c=a[o];c.end=ia(w(this.eventEnd(c),b,true),e);Ma(c,this.options)}},renderOverlay:function(a,b){this.overlays.push(m("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>").css(a).appendTo(b))},clearOverlays:function(){m.each(this.overlays,function(){this.remove()});this.overlays=[]},resizableDayEvent:function(a,b,e){var c=this;if(!c.options.disableResizing&&b.resizable)b.resizable({handles:c.options.isRTL?
{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:e,minWidth:e/2,containment:c.element.parent().parent(),start:function(g,o){b.css("z-index",9);c.hideEvents(a,b);c.trigger("eventResizeStart",this,a,g,o)},stop:function(g,o){c.trigger("eventResizeStop",this,a,g,o);var l=Math.round((b.width()-o.originalSize.width)/e);if(l)c.eventResize(this,a,l,0,g,o);else{b.css("z-index",8);c.showEvents(a,b)}}})},eventElementHandlers:function(a,b){var e=this;b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&
!b.hasClass("ui-resizable-resizing"))return e.trigger("eventClick",this,a,c)}).hover(function(c){e.trigger("eventMouseover",this,a,c)},function(c){e.trigger("eventMouseout",this,a,c)})},option:function(a,b){a=this.options[a];if(typeof a=="object")return pb(a,b||this.name);return a},sliceSegs:function(a,b,e,c){var g=[],o,l=a.length,G,B,r,V,D;for(o=0;o<l;o++){G=a[o];B=G.start;r=b[o];if(r>e&&B<c){if(B<e){B=q(e);V=false}else{B=B;V=true}if(r>c){r=q(c);D=false}else{r=r;D=true}g.push({event:G,start:B,end:r,
isStart:V,isEnd:D,msLength:r-B})}}return g.sort(Ib)}},Nb=864E5,Jb=36E5,Hb=6E4;Ia.addDays=w;var qb=Ia.parseDate=function(a){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);return Ob(a,true)||(a?new Date(a):null)}return null},Ob=Ia.parseISO8601=function(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);
if(!a)return null;var e=new Date(a[1],0,1),c=new Date(a[1],0,1,9,0),g=0;if(a[3]){e.setMonth(a[3]-1);c.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);c.setDate(a[5])}nb(e,c);a[7]&&e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+a[12])*1E3);nb(e,c);if(!b){if(a[14]){g=Number(a[16])*60+Number(a[17]);g*=a[15]=="-"?1:-1}g-=e.getTimezoneOffset()}return new Date(+e+g*60*1E3)},yb=Ia.parseTime=function(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*
60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}},ra=Ia.formatDate=function(a,b,e){return Ka(a,null,b,e)},Ka=Ia.formatDates=function(a,b,e,c){c=c||ab;var g=a,o=b,l,G=e.length,B,r,V,D="";for(l=0;l<G;l++){B=e.charAt(l);if(B=="'")for(r=l+1;r<G;r++){if(e.charAt(r)=="'"){if(g){D+=r==l+1?"'":e.substring(l+1,r);l=r}break}}else if(B=="(")for(r=l+1;r<G;r++){if(e.charAt(r)==")"){l=
ra(g,e.substring(l+1,r),c);if(parseInt(l.replace(/\D/,"")))D+=l;l=r;break}}else if(B=="[")for(r=l+1;r<G;r++){if(e.charAt(r)=="]"){B=e.substring(l+1,r);l=ra(g,B,c);if(l!=ra(o,B,c))D+=l;l=r;break}}else if(B=="{"){g=b;o=a}else if(B=="}"){g=a;o=b}else{for(r=G;r>l;r--)if(V=Pb[e.substring(l,r)]){if(g)D+=V(g,c);l=r-1;break}if(r==l)if(g)D+=B}}return D},Pb={s:function(a){return a.getSeconds()},ss:function(a){return Qa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Qa(a.getMinutes())},
h:function(a){return a.getHours()%12||12},hh:function(a){return Qa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Qa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Qa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Qa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},
yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return ra(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}},$a,E,ya=["sun","mon","tue","wed","thu","fri","sat"]})(jQuery);
