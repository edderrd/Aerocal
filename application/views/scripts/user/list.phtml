<?php $this->JQuery()->addOnLoad("tableHightlight('main-table');")?>
<table class="table-pane" id="main-table">
    <thead>
        <tr>
            <th><?= $this->translate->_("First name") ?></th>
            <th><?= $this->translate->_("Last name") ?></th>
            <th><?= $this->translate->_("Username") ?></th>
            <th><?= $this->translate->_("Role") ?></th>
            <th style="width: 30px;"><span class="edit-mono-icon">&nbsp;</span></th>
            <th style="width: 30px;"><span class="delete-mono-icon">&nbsp;</span></th>
        </tr>
    </thead>
    <?php foreach($this->users as $user): ?>
        <tr>
            <td><?= $user['first_name'] ?></td>
            <td><?= $user['last_name'] ?></td>
            <td><?= $user['username'] ?></td>
            <td><?= ucfirst($user['AclRole']['name']) ?></td>
            <?php if($this->acl()->isValid("user", "edit")):?>
                <td><a class="edit-icon x-hidden" href="javascript: modalDialog('<?= $this->baseUrl ?>/user/edit/format/json/id/<?= $user['id'] ?>');">&nbsp;</a></td>
            <?php else: ?>
                <td>&nbsp;</td>
            <?php endif; ?>
            <?php if($this->acl()->isValid("user", "delete")):?>
                <td><a class="delete-icon x-hidden" href="javascript:alert('Not implemented'); modalDialog('<?= $this->baseUrl ?>/user/delete/id/<?= $user['id'] ?>')">&nbsp;</a></td>
            <?php else: ?>
                <td>&nbsp;</td>
            <?php endif; ?>
        </tr>
    <?php endforeach; ?>
</table>
<?php if($this->acl()->isValid('user', 'create')): ?>
    <?php $this->toolbar()
            ->setButtonset(false)
            ->addButton("create-btn", $this->translate->_("Create user"), array('onclick' => "modalDialog('".$this->baseUrl."/user/create/format/json');"))?>
<?php endif; ?>
